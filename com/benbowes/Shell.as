package com.benbowes{  	import flash.display.*;	import flash.events.*;	import flash.system.*; 	import com.benbowes.Global;	import com.greensock.*;	import com.greensock.easing.*;	import br.com.stimuli.loading.BulkLoader;	import br.com.stimuli.loading.BulkProgressEvent;		public class Shell extends Sprite{				private var SCOPE;		private var bLoader:BulkLoader;				public function Shell(){			stage.align = "TL";			stage.scaleMode = "noScale";			Security.allowDomain ("*");			Security.allowInsecureDomain ("*");			SCOPE = this;			bLoader = new BulkLoader("SHELL-LOADER");			addEventListener(Event.ADDED_TO_STAGE, init, false, 0 , true);			addEventListener(Event.REMOVED_FROM_STAGE, kill, false, 0 , true);			addEventListener(Event.RESIZE, positionItems, false, 0 , true);			positionItems();		}		private function positionItems(e:Event=null){			preloader.x = stage.stageWidth * 0.5;			preloader.y = stage.stageHeight * 0.5;		}		private function kill(e:Event){			removeEventListener(Event.ADDED_TO_STAGE, init);			removeEventListener(Event.REMOVED_FROM_STAGE, kill);		}				private function init(e:Event){ 			// TweenMax.to(SCOPE.preloader,0,{glowFilter:{color:0x64b013, blurX:1, blurY:1, alpha:0}});  			TweenMax.to(SCOPE.preloader,0,{glowFilter:{color:0x64b013, blurX:1, blurY:1, alpha:0}});   			TweenMax.from(SCOPE.preloader,0.6,{autoAlpha:100, ease:Quint.easeInOut});			SCOPE.preloader.addressTf.alpha = 0; 			SCOPE.preloader.loadingTf.alpha = 1;						if(root.loaderInfo.parameters.baseUrl == undefined || root.loaderInfo.parameters.baseUrl == null || root.loaderInfo.parameters.baseUrl == ""){				Global.FLASHVARS.baseUrl = "";			}else{				Global.FLASHVARS.baseUrl = root.loaderInfo.parameters.baseUrl;			}						bLoader.add ("main.swf", {id:"main"});			bLoader.addEventListener (BulkLoader.COMPLETE, onAllItemsLoaded);			bLoader.addEventListener (BulkLoader.PROGRESS, onAllItemsProgress);			bLoader.start (); 		}				private function onAllItemsLoaded (e:Event):void {			TweenMax.to(SCOPE.preloader,2,{ glowFilter:{color:0x64b013, alpha:1, blurX:4, blurY:4, quality:3, strength:1}, ease:Quint.easeInOut});			TweenLite.to(SCOPE.preloader,1,{delay:3, autoAlpha:0, ease:Quint.easeInOut, onComplete:addMainContent});			TweenMax.to(SCOPE.preloader.addressTf,1,{delay:0.9, alpha:1, ease:Quint.easeInOut});			TweenMax.to(SCOPE.preloader.loadingTf,0.5,{alpha:0, ease:Quint.easeInOut});       		}				private function onAllItemsProgress (e:BulkProgressEvent):void {			if(e.percentLoaded != 0){				TweenMax.to(SCOPE.preloader.masker,0.3,{width:e.percentLoaded*165, ease:Quint.easeInOut});			}		}		private function addMainContent(){  			SCOPE.container.addChild (bLoader.getSprite("main")); 		}	}}