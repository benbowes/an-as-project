// dispatchEvent(new EventShowProjectPopUp("au.com.maybelline.colorsensational.HomePage"));package com.benbowes{      	import flash.net.*;	import flash.display.*;	import flash.events.*;	import flash.text.*;	import com.benbowes.EventLoadNextThumb;	import com.benbowes.Global;	import com.greensock.*;	import com.greensock.easing.*;	public class PageLifestyle extends MovieClip {		    private var SCOPE:MovieClip; 	    private var baseUrl:String; 		private var index:int = 0;		public var currentIndex:int = 0;		private var images:Array;		private var len:int = 0;		private var ySpacing:int = 0;   		private var allLoaded:Boolean = false;  		private var myTimeline:TimelineMax;				public function PageLifestyle():void {		   SCOPE = this;		   SCOPE.addEventListener(Event.ADDED_TO_STAGE,init,false,0,true);		   baseUrl = Global.FLASHVARS.baseUrl; 		} 			private function init (e:Event = null) {    			expandIcon.alpha = 0; 		    images = [];  			len = Global.FLASHVARS.illuraLifestyleXML.gallery.image.length();						for(var n=0;n<len;n++){				images[n] = baseUrl + Global.FLASHVARS.illuraLifestyleXML.gallery.image[n].url.text();			}			 			myTimeline = new TimelineMax();						for(var i=0;i<len;i++){   			   var mc = SCOPE.addChildAt(new com.benbowes.LifestyleImageLoader(),0);			   mc.name = "full" + i; 			   mc.INDEX = i;			   mc.headingTf.text = Global.FLASHVARS.illuraLifestyleXML.gallery.image[mc.INDEX].heading.text();			   mc.headingText = Global.FLASHVARS.illuraLifestyleXML.gallery.image[mc.INDEX].txt.@heading;		       mc.bodyText = Global.FLASHVARS.illuraLifestyleXML.gallery.image[mc.INDEX].txt.text();        			   mc.x = 50 + ((i%5) * 124);			   mc.X =  50 + (((i%5) * 124) + (SCOPE.x));			   if(i%5 == 0 && i != 0){					ySpacing += 124;			   }			   mc.y = 200 + ySpacing;    			   mc.Y =  200 + Math.round(ySpacing + SCOPE.y);   			   myTimeline.insert( TweenMax.from(mc,1,{alpha:0, ease:Quad.easeOut, delay:1 + (i * 0.04)}) );			}		  			  			SCOPE.addEventListener (EventLoadNextThumb.NEW_DATA, LoadNextThumb, false, 0, true);			SCOPE.closeBtn.buttonMode = true,arrowRightBtn.buttonMode = true;                                            //arrowLeftBtn.buttonMode = true			SCOPE.closeBtn.addEventListener(MouseEvent.CLICK,closeClick,false,0,true);			SCOPE.closeBtn.addEventListener(MouseEvent.ROLL_OVER,over,false,0,true);			SCOPE.closeBtn.addEventListener(MouseEvent.ROLL_OUT,out,false,0,true);						//SCOPE.arrowLeftBtn.addEventListener(MouseEvent.CLICK,arrowLeftClick,false,0,true);  			//SCOPE.arrowLeftBtn.addEventListener(MouseEvent.ROLL_OVER,over,false,0,true);  			//SCOPE.arrowLeftBtn.addEventListener(MouseEvent.ROLL_OUT,out,false,0,true);  						SCOPE.arrowRightBtn.addEventListener(MouseEvent.CLICK,arrowRightClick,false,0,true);  			SCOPE.arrowRightBtn.addEventListener(MouseEvent.ROLL_OVER,over,false,0,true);  			SCOPE.arrowRightBtn.addEventListener(MouseEvent.ROLL_OUT,out,false,0,true);  			TweenMax.to (closeBtn, 0, {autoAlpha:0});			//TweenMax.to (arrowLeftBtn, 0, {autoAlpha:0});			TweenMax.to (arrowRightBtn, 0, {autoAlpha:0});			LoadNextThumb (null);		}		private function closeClick(e:MouseEvent=null){   			for(var i=0; i<index; i++){			   	var mc = SCOPE.getChildByName("full"+i);    				mc.hideMe();			}   		}		private function arrowLeftClick(e:MouseEvent=null){   			// hide All - index-1 is the amount of thumbs loaded   			var nextIndex:int; 			var tempIndex = (allLoaded == false) ? index-1: len;   // if not all loaded - use loaded amount			for(var i=0; i<tempIndex; i++){			   	var pastMc = SCOPE.getChildByName("full"+i);				pastMc.hideMeFast();			}     			// show Next			if(currentIndex-1 >= 0){			   nextIndex = currentIndex-1;    			}else{                               			   nextIndex = tempIndex-1;     			}  			try{ 				var mc = SCOPE.getChildByName("full"+nextIndex);	            mc.enlargeSlow();			}catch(err){    				trace("arrowLeftClick catch",nextIndex)				mc = SCOPE.getChildByName("full0");	            mc.enlargeSlow();			}		}		private function arrowRightClick(e:MouseEvent=null){            // hide All      			var nextIndex:int; 			var tempIndex = (allLoaded == false) ? index-1: len;   // if not all loaded - use loaded amount			for(var i=0; i<tempIndex; i++){			   	var pastMc = SCOPE.getChildByName("full"+i);				pastMc.hideMeFast();			}     			// show Next			if(currentIndex+1 < tempIndex){			   nextIndex = currentIndex+1;  			}else{                                 			   nextIndex = 0;			}  			try{				var mc = SCOPE.getChildByName("full"+nextIndex);	            mc.enlargeSlow();			}catch(err){        				trace("arrowRightClick catch")				mc = SCOPE.getChildByName("full"+(index-1));	            mc.enlargeSlow();			}		}		private function LoadNextThumb (e):void {                                                   						if (index < len) { 				var mc = SCOPE.getChildByName("full"+index);    				mc.fullUrl = images[index]; 				trace(mc.fullUrl)        				index++;			}else{  				allLoaded = true;				trace("All Loaded");			}      		}		public function showImageControls () { 						// position controls			closeBtn.x = (stage.stageWidth - closeBtn.width) + (60 - (SCOPE.x + SCOPE.parent.x)) , closeBtn.y = - (SCOPE.y + SCOPE.parent.y);			TweenMax.to (closeBtn, 1, {autoAlpha:1, delay:1, x:closeBtn.x - 60, ease:Quint.easeInOut});            			//arrowLeftBtn.x = - (60 + (SCOPE.x + SCOPE.parent.x)), arrowLeftBtn.y = (((stage.stageHeight * 0.5) - (SCOPE.y + SCOPE.parent.y)) - (arrowRightBtn.height * 0.5));                                          			//TweenMax.to (arrowLeftBtn, 1, {autoAlpha:1, delay:1, x:arrowLeftBtn.x + 60, ease:Quint.easeInOut});						arrowRightBtn.x = (stage.stageWidth - arrowRightBtn.width) + (60- (SCOPE.x + SCOPE.parent.x)), arrowRightBtn.y = (((stage.stageHeight * 0.5) - (SCOPE.y + SCOPE.parent.y)) - (arrowRightBtn.height * 0.5)); 			TweenMax.to(arrowRightBtn, 1, {autoAlpha:1, delay:1, x:arrowRightBtn.x - 60, ease:Quint.easeInOut});		}		public function hideImageControls () {			// position controls			TweenMax.to (closeBtn, 1, {autoAlpha:1, delay:1, x:(stage.stageWidth - closeBtn.width) + (60 - (SCOPE.x + SCOPE.parent.x)), ease:Quint.easeInOut});			//TweenMax.to (arrowLeftBtn, 1, {autoAlpha:1, delay:1, x:-(60 + (SCOPE.x + SCOPE.parent.x)), y:(((stage.stageHeight * 0.5) - (SCOPE.y + SCOPE.parent.y)) - (arrowRightBtn.height * 0.5)), ease:Quint.easeInOut});  			TweenMax.to(arrowRightBtn, 1, {autoAlpha:1, delay:1, x:(stage.stageWidth - arrowRightBtn.width) + 60, y:(((stage.stageHeight * 0.5) - (SCOPE.y + SCOPE.parent.y)) - (arrowRightBtn.height * 0.5)), ease:Quint.easeInOut});		}    		private function over(e:MouseEvent=null):void{   			 TweenMax.to (e.target,0,{alpha:0.7, ease:Quint.easeInOut});  			 		}  		private function out(e:MouseEvent=null):void{   			 TweenMax.to (e.target,0.4,{alpha:1, ease:Quint.easeInOut}); 		} 		public function hide() { 			myTimeline.timeScale = 4;			myTimeline.reverse();		}	}}